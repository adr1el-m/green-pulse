<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoFootprint AI üåø</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#2C5F2D",
                        secondary: "#97BC62FF",
                        accent: "#A7C957",
                        dark: "#1B3B1A",
                        light: "#E9F5DB",
                    }
                }
            }
        };
    </script>
</head>
<body class="bg-light text-dark dark:bg-dark dark:text-light transition-all">
    <div class="min-h-screen flex flex-col items-center justify-center px-6">
        <div class="w-full max-w-6xl bg-white dark:bg-primary shadow-lg rounded-lg p-6">
            <h1 class="text-3xl font-bold text-center text-primary dark:text-light">üåç EcoFootprint AI</h1>
            <p class="text-center text-gray-600 dark:text-gray-300 mt-2">Calculate your environmental impact & get AI-powered tips!</p>

            <!-- FORM -->
            <form id="footprintForm" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="col-span-1">
                    <label class="block text-lg font-semibold">üöó How many kilometers do you travel daily & by what means?</label>
                    <input id="transport" type="text" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., 10 km by car">
                </div>
                
                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4 md:mt-0">‚ö° Monthly electricity usage (kWh)?</label>
                    <input id="energy" type="number" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., 250">
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">üíß How much water do you consume daily (liters)?</label>
                    <input id="water" type="number" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., 100">
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">üçΩÔ∏è Describe your diet (include meals & food choices)</label>
                    <textarea id="diet" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., Mostly vegetarian, occasional meat, dairy..."></textarea>
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">‚ôªÔ∏è How do you manage waste (recycling, composting, etc.)?</label>
                    <textarea id="waste" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., I recycle plastics and compost food scraps"></textarea>
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">üè† Do you use any sustainable energy sources (e.g., solar panels)?</label>
                    <input id="sustainableEnergy" type="text" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., Solar panels, wind energy">
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">üå± How often do you purchase eco-friendly or sustainable products?</label>
                    <input id="ecoPurchases" type="text" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., Weekly, monthly">
                </div>

                <div class="col-span-1">
                    <label class="block text-lg font-semibold mt-4">üå≥ Do you participate in any environmental conservation activities?</label>
                    <textarea id="conservation" class="w-full p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-light" placeholder="e.g., Beach clean-ups, tree planting"></textarea>
                </div>

                <div class="col-span-2">
                    <button type="submit" class="mt-6 w-full bg-primary text-white py-2 rounded hover:bg-secondary transition">
                        üå± Calculate My Impact
                    </button>
                </div>
            </form>

            <!-- OUTPUT -->
            <div id="output" class="mt-6 text-lg font-semibold"></div>
        </div>
    </div>

    <script>
        const API_KEY = "AIzaSyDr-mS0aSHgcapEfJ5oNSaoiD4jyLqUZNA"; // Replace with your API Key
        const form = document.getElementById("footprintForm");
        const output = document.getElementById("output");

        form.onsubmit = async (e) => {
            e.preventDefault();
            output.innerHTML = "üåç Analyzing your footprint...";

            const transport = document.getElementById("transport").value;
            const energy = document.getElementById("energy").value;
            const water = document.getElementById("water").value;
            const diet = document.getElementById("diet").value;
            const waste = document.getElementById("waste").value;
            const sustainableEnergy = document.getElementById("sustainableEnergy").value;
            const ecoPurchases = document.getElementById("ecoPurchases").value;
            const conservation = document.getElementById("conservation").value;

            const prompt = `Analyze my carbon footprint based on these activities:\n\n\n**Transportation:** ${transport}\n**Electricity Usage:** ${energy} kWh/month\n**Water Consumption:** ${water} liters/day\n**Diet:** ${diet}\n**Waste Management:** ${waste}\n**Sustainable Energy Sources:** ${sustainableEnergy}\n**Eco-friendly Purchases:** ${ecoPurchases}\n**Conservation Activities:** ${conservation}\n\nProvide a structured report with suggestions to reduce my environmental impact. Please don't provide the Data Summary`;

            try {
                const response = await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=" + API_KEY, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ role: "user", parts: [{ text: prompt }] }]
                    })
                });

                const data = await response.json();
                const responseText = data.candidates[0].content.parts[0].text;

                if (responseText.includes("| Category | Value | Relative Impact |")) {
                    const tableHtml = `
                        <h2 class="text-2xl font-bold mt-6">üíö Your Carbon Footprint</h2>
                        <table class="mt-4 w-full table-auto border-collapse border border-gray-300">
                            <thead>
                                <tr class="bg-primary text-white">
                                    <th class="px-4 py-2">Category</th>
                                    <th class="px-4 py-2">Value</th>
                                    <th class="px-4 py-2">Relative Impact</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${responseText.split('\n').map(line => {
                                    if (line.includes("|")) {
                                        const cols = line.split('|').map(col => col.trim());
                                        return `
                                            <tr>
                                                <td class="border px-4 py-2">${cols[1]}</td>
                                                <td class="border px-4 py-2">${cols[2]}</td>
                                                <td class="border px-4 py-2">${cols[3]}</td>
                                            </tr>
                                        `;
                                    }
                                    return '';
                                }).join('')}
                            </tbody>
                        </table>
                    `;
                    output.innerHTML = tableHtml;
                } else {
                    output.innerHTML = `<p class="mt-4 text-green-600">${responseText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>')}</p>`;
                }
            } catch (error) {
                output.innerHTML = "<p class='text-red-600'>‚ùå Error generating response. Check API key.</p>";
            }
        };
    </script>
</body>
</html>
